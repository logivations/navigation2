<!--
  This Behavior Tree replans the global path periodically at 1 Hz.
-->

<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
  <SequenceStar name="TransformNeeded">
     <RecoveryNode number_of_retries="5" name="TransformWaiter">
      <RateController hz="0.5">
        <TransformAvailable child="base_link" parent="map"/>
      </RateController>
      <Wait wait_duration="5"/>
    </RecoveryNode>
    
    <PipelineSequence name="NavigateWithReplanning">
      <RateController hz="0.5">
        <ComputePathToPose goal="{goal}" path="{path}" planner_id="GridBased"/>
      </RateController>
      <FollowPath path="{path}"  controller_id="DynamicFollowPath"/>
    </PipelineSequence>
          
  </SequenceStar>
    
  </BehaviorTree>
</root>
